---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.14.0
  name: cloudsigmamachinetemplates.infrastructure.cluster.x-k8s.io
spec:
  group: infrastructure.cluster.x-k8s.io
  names:
    categories:
    - cluster-api
    kind: CloudSigmaMachineTemplate
    listKind: CloudSigmaMachineTemplateList
    plural: cloudsigmamachinetemplates
    singular: cloudsigmamachinetemplate
  scope: Namespaced
  versions:
  - name: v1beta1
    schema:
      openAPIV3Schema:
        description: CloudSigmaMachineTemplate is the Schema for the cloudsigmamachinetemplates
          API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: CloudSigmaMachineTemplateSpec defines the desired state of
              CloudSigmaMachineTemplate
            properties:
              template:
                description: CloudSigmaMachineTemplateResource describes the data
                  needed to create a CloudSigmaMachine from a template
                properties:
                  spec:
                    description: Spec is the specification of the desired behavior
                      of the machine.
                    properties:
                      cpu:
                        description: CPU is the CPU frequency in MHz
                        maximum: 100000
                        minimum: 1000
                        type: integer
                      disks:
                        description: Disks defines the disk configuration
                        items:
                          description: CloudSigmaDisk defines a disk configuration
                          properties:
                            boot_order:
                              description: BootOrder is the boot priority
                              type: integer
                            device:
                              description: Device is the device type (virtio or ide)
                              enum:
                              - virtio
                              - ide
                              type: string
                            size:
                              description: Size is the disk size in bytes
                              format: int64
                              type: integer
                            uuid:
                              description: UUID is the drive/image UUID
                              type: string
                          required:
                          - boot_order
                          - device
                          - size
                          - uuid
                          type: object
                        minItems: 1
                        type: array
                      memory:
                        description: Memory is the memory size in MB
                        maximum: 524288
                        minimum: 512
                        type: integer
                      meta:
                        additionalProperties:
                          type: string
                        description: Meta is custom metadata for the server
                        type: object
                      nics:
                        description: NICs defines the network interface configuration
                        items:
                          description: CloudSigmaNIC defines a network interface configuration
                          properties:
                            ipv4_conf:
                              description: IPv4Conf is the IPv4 configuration
                              properties:
                                conf:
                                  description: Conf is the configuration type (dhcp,
                                    static, or manual)
                                  enum:
                                  - dhcp
                                  - static
                                  - manual
                                  type: string
                                ip:
                                  description: IP is the IP address reference for
                                    static configuration
                                  properties:
                                    uuid:
                                      description: UUID is the IP address UUID
                                      type: string
                                  required:
                                  - uuid
                                  type: object
                              required:
                              - conf
                              type: object
                            vlan:
                              description: VLAN is the VLAN UUID
                              type: string
                          required:
                          - ipv4_conf
                          - vlan
                          type: object
                        minItems: 1
                        type: array
                      providerID:
                        description: |-
                          ProviderID is the unique identifier as specified by the cloud provider
                          Format: cloudsigma://server-uuid
                        type: string
                      tags:
                        description: Tags are metadata tags for the server
                        items:
                          type: string
                        type: array
                    required:
                    - cpu
                    - disks
                    - memory
                    - nics
                    type: object
                required:
                - spec
                type: object
            required:
            - template
            type: object
        type: object
    served: true
    storage: true
